title: Example
version: 1.0
description: ~resources/description.txt

# Global user interface options
# If a subset or all of these features are omitted, the default values will be used
global:
  window_size: 900 x 780 # Outer size of the program window in pixels
  min_window_size: 800 x 700 # Minimum allowed window size in pixels
  content_size: 700 x 0.82 # Inner size of content, either as pixels or fraction of outer window
  resizable: true # Whether to allow resizing the window by user
  font_scale: 1.0 # Text size scaling, a value between 0.5 and 3.0
  text_alignment: center # One of left, center, or right

# Task configuration options
#     All configurations are of form [ value, true/false ]. The value determines the
#     default value for the configuration, while the true/false determines whether
#     that value should be forced. Any configuration items set to false will be
#     configurable from within the program by the user.
# 
# 1. audio -> one of MonoAndTrigger or Stereo
#     If MonoAndTrigger, for each audio file another one with the same location and
#     name, but .trig.wav extension should be present, which has the same sampling
#     rate and the same number of samples.
# 
# If a subset or all of these features are omitted, the default values will be used
configuration:
  audio: [ Stereo, false ]

# A list of experiment blocks, each containing a title and a list of actions to perform
blocks:
  - title: 1st Block
    actions:
      - Instruction:
          prompt: Press the button every time you hear a beep
          timer: 3 # Show instruction for a duration of 3 seconds
      - Audio:
          source: resources/block1.wav # Location of audio file, relative to task directory
          background: resources/fixation-cross-small.png # Optional background image
          monitor_kb: true # Key presses are logged while this audio file is playing
      - Question:
          list:
            - MultiChoice:
                prompt: Which of the following are colors?
                options: [ Wind, Track, Blue, Yellow ]
            - SingleChoice:
                prompt: "Pick only one option:"
                options: [ Alpha, Beta, Gamma, Delta ] 
            - ShortAnswer:
                prompt: "Write a short sentence:"
            - Slider:
                prompt: "Use the slider to pick a number from the range:"
                range: [ 0.0, 100.0 ]
                step: 5.0

  - title: 2nd Block
    actions:
      - Instruction:
          prompt: Press Next to advance
          timer: 0 # Wait for user to press a button to move on
      - Audio:
          source: resources/block2a.flac
      - Nothing: # This action does not do anything but can be used to organize other actions
          background: resources/fixation-cross-small.png
          timeout: 2 # Stop action after 2 seconds no matter what, applicable to all actions
      - Audio:
          source: resources/block2b.wav

  - title: 3rd Block
    actions:
      - Instruction:
          prompt: This block demonstrates the execution flow of actions
          timer: 0
      
      - Instruction:
          id: start # The name of this action to be referenced later
          prompt: Multiple actions can run simultaneously
          timer: 0
      - Audio:
          id: audio-a
          after: [ start ] # Begin action after action "start" ends
          source: resources/block2a.flac
      - Audio:
          id: audio-b
          after: [ start ] # Begin action after action "start" ends
          source: resources/block2b.wav
      - Question:
          id: question1
          after: [ start ] # This action starts at the same time as "audio1"
          list:
            - SingleChoice:
                prompt: Some question
                options: [ Answer A, Answer B, Answer C ]
      - Instruction:
          after: [ audio-a, audio-b, question1 ] # After takes a list of action names
          prompt: This text will only show after the sounds are played AND the question answered.
          timer: 0
      
      - Instruction:
          prompt: >
            An action can also be contained within another one,
            starting when it starts and ending when it ends.
            Unless it ends on its own before the parent action.
          timer: 0
      - Question:
          id: question2
          list:
            - Slider:
                prompt: Choose a value between 1 and 5
                range: [ 1.0, 5.0 ]
                step: 1.0
      - Audio:
          with: question2 # This action will start with "question2" and end no later than it
          source: resources/block1.wav
      - Instruction:
          after: [ question2 ] # After takes a list of action names
          prompt: This text will show whether or not the audio finished playing.
          timer: 0

      - Instruction:
          # When "after" and "with" are omitted, the default behavior is to start after the
          # previous action (here, the instruction above).
          id: start2
          prompt: >
            These flow elements can be chained together to run multiple streams
            of actions in parallel. For example, all three sounds will play
            until the button below is pressed.
          timer: 0
      - Audio:
          id: audio3
          with: start2
          source: resources/block1.wav
      - Audio:
          id: audio4
          with: start2
          after: [ audio3 ]
          source: resources/block2a.flac
      - Nothing:
          id: wait
          with: start2
          after: [ audio4 ]
          timeout: 3
      - Audio:
          id: audio5
          with: start2
          after: [ wait ]
          source: resources/block2b.wav
      - Instruction:
          id: start2
          prompt: The End
          timer: 1
